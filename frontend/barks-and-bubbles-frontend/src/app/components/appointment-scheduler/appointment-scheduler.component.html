<div class="title-layout">
  <button mat-icon-button
          (click)="saveReplies(true)"
          color="primary"
          matTooltip="Save Appointments">
    <mat-icon>save</mat-icon>
  </button>

  <button mat-icon-button
          (click)="resetAppTimes()"
          color="warn"
          matTooltip="Reset All Appointments">
    <mat-icon>
      restart_alt
    </mat-icon>
  </button>

  <button mat-icon-button
          matTooltip="Send Reply Texts"
          (click)="openPanel()">
    <mat-icon class="mat-accent-icon-btn">
      outgoing_mail
    </mat-icon>
  </button>
</div>

<div class="location-colors scroll">
  <p *ngFor="let location of this.locations; index as index">
    <span class="location-circle"
          [style.background-color]="colors[index]"></span>{{location}}
  </p>
</div>

<div class="layout">
  <div (dragover)="onDragOver($event)"
       (touchmove)="onDragOver($event)"
       (drop)="onDrop($event, null)"
       (touchend)="onDrop($event, null)"
       class="replies-container scroll"
       [ngClass]="{'no-scroll': !filter(this.replies, null).length}">

    <mat-accordion *ngFor="let reply of filter(this.replies, null)"
                   draggable="true"
                   (dragstart)="onDragStart(reply)"
                   (touchstart)="onDragStart(reply)">
      <mat-expansion-panel>
        <mat-expansion-panel-header *ngIf="reply.body.length > 10"
                                    matTooltip="{{reply.body}}">{{reply.body}}</mat-expansion-panel-header>
        <mat-expansion-panel-header *ngIf="reply.body.length <= 10">{{reply.body}}</mat-expansion-panel-header>

      </mat-expansion-panel>
    </mat-accordion>

    <mat-card *ngFor="let reply of filter(this.replies, null)"
              draggable="true"
              (dragstart)="onDragStart(reply)"
              (touchstart)="onDragStart(reply)">
      <p *ngIf="reply.body.length > 10"
         matTooltip="{{reply.body}}">{{reply.body}}</p>
      <p *ngIf="reply.body.length <= 10">{{reply.body}}</p>
      <mat-card-footer align="end">{{getClientName(reply.from)}}</mat-card-footer>
    </mat-card>
    <p *ngIf="!filter(this.replies, null).length"
       (dragover)="onDragOver($event)"
       (touchmove)="onDragOver($event)"
       (drop)="onDrop($event, null)"
       (touchend)="onDrop($event, null)"
       class="no-replies">No Replies</p>

  </div>
  <div class="hours scroll">
    <div class="hour"
         *ngFor="let hour of hours"
         (dragover)="onDragOver($event)"
         (touchmove)="onDragOver($event)"
         (drop)="onDrop($event, hour)"
         (touchend)="onDrop($event, hour)">
      <h3>{{hour}}</h3>
      <div class="hour-reply-layout">
        <mat-card *ngFor="let reply of filter(this.replies, hour)"
                  draggable="true"
                  (dragstart)="onDragStart(reply)"
                  (touchstart)="onDragStart(reply)">
          <p *ngIf="reply.body.length > 10"
             matTooltip="{{reply.body}}">{{reply.body}}</p>
          <p *ngIf="reply.body.length <= 10">{{reply.body}}</p>

          <mat-card-footer align="end">{{getClientName(reply.from)}}</mat-card-footer>
        </mat-card>
      </div>

      <h3 *ngIf="!filter(this.replies, hour).length"
          class="err-msg">Nothing Scheduled at {{hour}}</h3>
    </div>
  </div>
</div>
